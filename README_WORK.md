## Part 1. Установка ОС
1. 
    * Установка Ubuntu 20.04 Server LTS без графического интерфейса 
    * Проверяем версию Ubuntu командой `cat /etc/issue`<br>
    ![Версия Ubuntu](img/image.png)<br>*Версия Ubuntu*<br>

## Part 2. Создание пользователя
1. 
    * Создаём нового пользователя командой `sudo adduser new_beregonb`<br>
    ![Создание нового пользователя](img/image-1.png) <br>*Создание нового пользователя*
    * Вызываем команду `sudo usermod -aG adm new_beregonb`<br>
    ![new_beregonb даны права администратора](img/image-3.png)<br>*new_beregonb даны права администратора*
    * вызвваем команду `cat /etc/passwd` <br>
    ![Проверка создания пользователя](img/image-4.png)<br>*Проверка создания пользователя*

## Part 3. Настройка сети ОС
1. 
    * Изменяем название машины на user-1 с помощью команды `hostnamectl set-hostname user-1`<br>
    ![Изменяем название машины](img/image-5.png)<br>*Изменяем название машины*
    * Выполняем перезагрузку для сохранения изменений
    * Вызов `cat /etc/hostname` <br>
    ![Проверяем изменение названия машины](img/image-6.png)<br>*Проверяем изменение названия машины*<br>

2. 
    * Проверяем часовой пояс командой`timedatectl`<br>
    ![Часовой пояс](img/image-8.png)<br>*Часовой пояс*
    * Изменяем часовой пояс командой `sudo timedatectl set-timezone Asia/Novosibirsk`<br>
    ![Часовой пояс](img/image-7.png)<br>*Часовой пояс*

3. 
    * Вывод названия сетевых интерфейсов с помощью команды `ls /sys/class/net`<br>
    ![Названия сетевых интерфейсов](img/image-9.png)<br>*Названия сетевых интерфейсов*
    * **Loopback** — совокупность методов, нужных для корректной работы маршрутизатора и передачи данных.<br>
    * Сам интерфейс же является отображением логических процессов в маршрутизаторе. Также саму технологию используют и для других целей:<br>
        1) тестирование передачи данных от обслуживающего центра коммутации;<br>
        2) проверка сигнала на расстоянии;<br>
        3) обеспечение работы коммутационных кабелей и их проверка;<br>
        4) тест обратной петли, когда сигнал посылается и возвращается отправителю по всем коммуникационным каналам.<br>

4. 
    * С помощью команды `ip r` получаем ip адрес устройства, на котором мы работаем, от DHCP сервера.<br>
    ![ip-адрес устройства](img/image-10.png)<br>*ip-адрес устройства*
    * **Dynamic Host Configuration Protocol (DHCP)** - это протокол управления сетью, используемый в сетях TCP/IP, в котором DHCP-сервер динамически присваивает каждому устройству IP-адрес и другие параметры сетевой конфигурации, чтобы они могли связываться с другими IP-сетями.<br>

5. 
    * Определить и вывести на экран внешний ip-адрес шлюза `curl ifconfig.co`<br>
    ![Внешний ip-адрес шлюза](img/image-11.png)<br>*Внешний ip-адрес шлюза*
    * Определить внутренний IP-адрес шлюза, он же ip-адрес по умолчанию `ip route | grep default`<br>
    ![Внутренний IP-адрес шлюза](img/image-12.png)<br>*Внутренний IP-адрес шлюза*

6. 
    * Настройка сетевых интерфейсов `sudo nano /etc/netplan/00-installer-config.yaml`<br>
    ![Настройка сетевых интерфейсов](img/image-15.png)<br>*Настройка сетевых интерфейсов*
    * Настройка DNS-серверов`sudo nano /etc/resolv.conf`<br>
    ![Настройка DNS-серверов](img/image-16.png)<br>*Настройка DNS-серверов*
    * Перезагружаем виртуальную машину командой `reboot`<br>
    * Проверка работоспособности `ping -c 8 1.1.1.1 && ping -c 8 ya.ru`<br>
    ![Проверяем настройки](img/image-13.png)<br>*Проверяем настройки*

## Part 4. Обновление ОС 

1. 
    * Для обновления индекса пакетов или списка пакетов, воспользуемся командой `sudo apt update`<br>
    ![Обновления](img/image-17.png)<br>*Обновления*
    * Обновим системные пакеты до последней, на момент выполнения задания, версии, используя команду `sudo apt full-upgrade`<br>
    ![Установка обновления](img/image-18.png)<br>*Установка обновления*
    * Проверка обновления `sudo apt update`<br>
    ![Проверка обновления](img/image-19.png)<br>*Проверка обновления*

## Part 5. Использование команды sudo

1. 
    * Разрешим пользователю, созданному в Part 2, выполнять команду sudo. Воспользуемся командой `sudo usermod -a -G sudo new_beregonb`<br>
    * Проверим к каким группам принадлежит пользователь new_beregonb с помощью команды `groups new_beregonb`<br>
    ![Sudo](img/image-20.png)<br>*Вывыполнение команды и проверка групп*
    * Sudo (Substitute user and do - подменить пользователя и выполнить) – это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями другой учётной записи, как правило, суперпользователя.

2. 
    * Поменяем hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo). Для этого необходимо сменить текущего пользователя на ранее созданного  с помощью команды `su new_beregonb`<br>
    ![Alt text](img/image-21.png)
    * Чтобы узнать текущее имя хоста воспользуемся командой `hostnamectl`<br>
    ![Имя хоста](img/image-22.png)<br>*Имя хоста*
    * Изменим имя хоста с user-1 на user-2 с помощью команды `sudo hostnamectl set-hostname user-2` и проверим<br>
    ![Хосты](img/image-23.png)<br>*Имя хоста измененное*
    * Выполним перезагрузку и проверим сохранность изменений<br>
    ![Имя хоста](img/image-24.png)<br>*Имя хоста измененное*

## Part 6. Установка и настройка службы времени

1. 
    * С помощью команды `date` выведем текущее время часового пояса, в котором мы находимся. Для вывода настроек часового пояса, используем команду `timedatectl show`
    ![Дата](img/image-25.png)<br>*Настройки часового пояса*

## Part 7. Установка и использование текстовых редакторов

1. 
    * Выполним установку текстовых редакторов командами `sudo apt install vim`, `sudo apt install nano`, `sudo apt install mcedit`<br>
    * VIM. Запишем никнейм beregonb<br>
    * ![VIM](img/image-26.png)<br>*Ник VIM*
    * NANO. Запишем никнейм beregonb<br>
    * ![NANO](img/image-27.png)<br>*Ник NANO*
    * MCEDIT. Запишем никнейм beregonb<br>
    * ![MCEDIT](img/image-28.png)<br>*Ник MCEDIT*

2. 
    * Запись "21 School 21" в файлы с выходом без сохранения
    * ![VIM](img/image-29.png)<br>*VIM*
    * Выходим командой `:q`<br>
    * ![NANO](img/image-30.png)<br>*NANO*
    * Выходим, при запросе сохнанения пишем `N`<br>
    * ![MCEDIT](img/image-31.png)<br>*MCEDIT*
    * Выбираем `Нет` при запросе сохранения
    * ![Консоль](img/image-32.png)<br>*Проверка информации с файлах*

3. 
    * Сделаем предыдущий пункт и сохраним<br>
    * ![Вставка слова](img/image-33.png)<br>*Пример*
    * VIM. Поиск `ESC + /<слово_для_поиска>`<br>
    * ![VIM](img/image-34.png)<br>*Поиск слов в VIM*
    * ![VIM](img/image-35.png)<br>*Замена слов в VIM*
    * NANO. Поиск `Ctrl + W`<br>
    * ![NANO](img/image-36.png)<br>*Поиск слов в NANO*
    * Замена `Ctrl + \`. Сначала пишем заменяемо слово, потом слово для замены.
    * ![NANO](img/image-37.png)<br>*Замена слов в NANO*
    * ![NANO](img/image-38.png)<br>*Замена слов в NANO*
    *  MCEDIT. Поиск `F7`. Вводим и подтвержаем<br>
    * ![MCEDIT](img/image-39.png)<br>*Поиск слов в MCEDIT*
    * Замена `F4`<br>
    * ![MCEDIT](img/image-40.png)<br>*Замена слов в MCEDIT*
    * Подтвержаем<br>
    * ![MCEDIT](img/image-41.png)<br>*Замена слов в MCEDIT*

## Part 8. Установка и базовая настройка сервиса SSHD

1. 
    * Установим службу SSHd с помощью команды `sudo apt install openssh-server` и проверим работоспособность `sudo systemctl status ssh`<br>
    ![SSH](img/image-42.png)<br>
    * Как видно на скриншоте, автостарт SSHd службы добавлен автоматически при загрузке. Чтобы включить автостарт можно воспользоваться командой `sudo systemctl enable ssh`, для выключения автостарта команда `sudo systemctl disable ssh`<br>
    * Для перенастройки службы SSHd на порт 2022 откроем файл sshd_config с помощью команды `sudo nano /etc/ssh/sshd_config`<br>
    * Изменим значение параметра Port с 22 на 2022<br>
    * ![Alt text](img/image-43.png)
    * Покажем наличие процесса sshd, используя команду `ps aux | grep -i ssh`<br>
    * ![Alt text](img/image-45.png)
    * `ps` - утилита для просмотра списка процессов в Linux. Параметр `-a` - выбрать все процессы всех пользователей, кроме фоновых. Параметр -u обозначает ориентированный на пользователя формат, который предоставляет подробную информацию о процессах. Параметр `-x` указывает `ps` перечислить процессы без управляющего терминала. В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме.
    `grep -i ssh` - выводит только те строчки, где есть `ssh` с игнорированием регистра за счет `-i`    .
    Символ | перенаправляет вывод команды `ps aux` на ввод grep `-i ssh`.
    * Выполним перезагрузку машины командой reboot и выполним команду `netstat -tan`<br>
    * ![Alt text](img/image-46.png)
    * Опция **-a** показывает состояние всех сокетов; **-n** показывает ip адрес, а не сетевое имя; **-t** показывает только tcp соединения.<br>
    * Значения столбцов:<br>
        1) Proto - протокол, используемый сокетом;<br>
        2) Recv-Q - количество байтов, не скопированных пользовательской программой, подключенной к этому сокету;<br>
        3) Local Address - локальный адрес (имя локального хоста) и номер порта сокета;<br>
        4) Foreign Address - удаленный адрес (имя удаленного хоста) и номер порта сокета;<br>
        5) State - состояние сокета;<br>
        6) 0.0.0.0 в этом контексте означает "все IP-адреса на локальной машине".<br>
    * Перезагружаем систему командой `sudo reboot`<br>

## Part 9. Установка и использование утилит top, htop

1. 
    * Команда `top` выводит на экран<br>
    ![top](img/image-47.png)<br>*вывод команды*
    * uptime - 3 минуты;
    * количество авторизованных пользователей - 1;
    * общую загрузку системы - 0.07;
    * общее количество процессов - 99;
    * загрузку cpu - 0.0 %;
    * загрузку памяти - 139.5 из 1971.6;
    * pid процесса занимающего больше всего памяти - 1;
    * pid процесса, занимающего больше всего процессорного времени - 1061.

2. 
    * Вывод команды `htop` без сортировки<br>
    ![htop](img/image-48.png)<br>
    * Для сортировки в `htop` нужно нажать `F6` и выбрать параметр сортировки<br>
    ![htop](img/image-49.png)<br>*htop отсортированный по `PID`* <br>
    ![Alt text](img/image-50.png)<br>*htop отсортированный по `PERCENT_CPU`*<br>
    ![Alt text](img/image-51.png)<br>*htop отсортированный по `PERCENT_MEM`* <br>
    ![Alt text](img/image-52.png)<br>*htop отсортированный по `TIME`* <br>
    * Для использования фильтров в `htop` нужно нажать `F4` и выбрать параметр фильтрации<br>
    ![SShd](img/image-53.png)<br>*`htop`, отфильтрованный для процесса `SSHd`* <br>
    * Для использования поиска в htop нужно нажать `F3` и ввести объект поиска<br>
    ![htop](img/image-54.png)<br>* `htop` с процессом `syslog`, найденным, используя поиск* <br>
    * Для добавления отображения дополнительных параметров в `htop`, необходимо нажать `F2` и добавить<br>
    ![Alt text](img/image-55.png)<br>*требуемые параметры `htop` с добавленным выводом `hostname`, `clock` и `uptime`*<br>

## Part 10. Использование утилиты fdisk

1. 
    * Запустить команду `fdisk -l`<br>
    ![Alt text](img/image-56.png)<br>*вывод команды*
    * Название жесткого диска: VBOX HARDDISK (/dev/sda);
    * Размер диска: 20 Гигабайт;
    * Количество секторов: 41943040;
    * Размер swap: 0;

## Part 11. Использование утилиты df

1. 
    * Запустить команду `df`<br>
    ![df](img/image-57.png)<br>*вывод команды*
    Для корневого раздела (/):
        - Размер раздела: 10218772;
        - Размер занятого пространства: 4711664;
        - Размер свободного пространства: 4966436;
        - Процент использования: 49 %;<br>
    Единицы измерения при выводе: Килобайты.

2. 
    * Выполним команду `df -Th`<br>
    ![df -Th](img/image-58.png)<br>*вывод команды*
    Для корневого раздела (/):
    - Размер раздела: 9.8;
    - Размер занятого пространства: 4.5;
    - Размер свободного пространства: 4.8;
    - Процент использования: 49 %;
    Единицы измерения при выводе: Гигабайты.
    Тип файловой системы: Ext4 - журналируемая файловая система, используемая в ОС на ядре Linux. Основана на файловой системе Ext3, но отличается тем, что в ней представлен механизм записи файлов в непрерывные участки блоков (екстенты), уменьшающий фрагментацию и повышающий производительность. В ней есть журналирование, то есть в ней предусмотрена запись некоторых данных, позволяющих восстановить файловую систему при сбоях в работе компьютера.

## Part 12. Использование утилиты du

1. 
    * Запустить команду `du`<br>
    ![du](img/image-59.png)<br>*вывод команды*
    * Вывод размера папки /home, /var, /var/log в байтах и в человекочитаемом виде командами `sudo du -s /[имя папки]/` и `sudo du -sh /[имя папки]/` <br>
    ![Размер](img/image-60.png)<br>*вывод команды*

2.  
    * Вывод размера всего содержимого папки /var/log в байтах и в человекочитаемом виде командами `sudo du /var/log/` и `sudo du -h /var/log/`<br>
    ![Вывод](img/image-61.png)<br>*вывод команды*
    * Вывод размера всего содержимого папки (каждого вложенного элемента) /var/log с использованием `*` командой `sudo du /var/log/* | less`<br>
    ![Вывод команды](img/image-62.png)<br>*вывод команды*

## Part 13. Установка и использование утилиты ncdu

1. 
    * Установим командой `sudo apt install ncdu`<br>
    * Вывести размер папок с помощью команды `ncdu`. /home, /var, /var/log.<br>
    ![Размер папок](img/image-66.png)<br>*вывод команды*<br>
    ![Размер папок](img/image-63.png)<br>*вывод команды*<br>
    ![Размер папок](img/image-65.png)<br>*вывод команды*<br>

## Part 14. Работа с системными журналами

1. 
    * `/var/log/dmesg`— драйвера устройств. Содержит сообщения, полученные от ядра. Регистрирует много сообщений еще на этапе загрузки, в них отображается информация об аппаратных устройствах, которые инициализируются в процессе загрузки. Одноименной командой можно просмотреть вывод содержимого файла. Размер журнала ограничен, когда файл достигнет своего предела, старые сообщения будут перезаписаны более новыми. Откроем для просмотра файл `/var/log/dmesg` с помощью команды `less /var/log/dmesg`<br>
    ![dmesg](img/image-64.png)<br>*вывод команды*
    * `/var/log/syslog` — содержит глобальный системный журнал, в котором пишутся сообщения с момента запуска системы, от ядра Linux, различных служб, обнаруженных устройствах, сетевых интерфейсов и много другого. Откроем для просмотра файл `/var/log/syslog` с помощью команды `less /var/log/syslog`<br>
    ![syslog](img/image-67.png)<br>*вывод команды*
    * `/var/log/auth.log` — информация об авторизации пользователей, включая удачные и неудачные попытки входа в систему, а также задействованные механизмы аутентификации. Откроем для просмотра файл`/var/log/auth.log` с помощью команды `less /var/log/auth.log`<br>
    ![auth.log](img/image-68.png)<br>*вывод команды*
    * Время последней успешной авторизации: sep 7, 8:49:38
    * Имя пользователя: user beregonb
    * Метод входа в систему: by uid = 0 (User Identifier). Суперпользователь всегда должен иметь UID, равный нулю (0).
    * Перезапустим службу SSHd с помощью команды `sudo systemctl restart ssh`<br>
    ![restart ssh](img/image-70.png)<br>*вывод команды*

## Part 15. Использование планировщика заданий CRON

1. 
    * Запустим команду `uptime` через каждые 2 минуты. Для этого откроем планировщик заданий CRON в текстовом редакторе nano с помощью команды `crontab -e` и Добавим строчку `*/2 * * * * uptime`<br>
    ![crontab](img/image-69.png)<br>*вывод изменения*
    * Найдем в системных журналах строчки о выполнении `uptime`. Для этого воспользуемся командой `less /var/log/syslog | grep CRON`
    ![crontab](img/image-71.png)<br>*вывод команды*
    * Выведем на экран список текущих заданий для CRON с помощью команды `crontab -l`<br>
    ![crontab](img/image-72.png)<br>*вывод команды*
    * Удалим все задания из планировщика заданий CRON с помощью команды `crontab -r` и проверим список текщих задач после удаления командой `crontab -l`<br>
    ![crontab](img/image-73.png)<br>*вывод команды*

